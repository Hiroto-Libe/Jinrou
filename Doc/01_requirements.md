# 🐺 人狼Webアプリ 要件定義書

## 1. 目的
- 同じ場所にいる参加者（最大20人）が、各自のスマホからアクセスして人狼ゲームをプレイできるようにする。
- ゲーム進行はゲームマスター（GM）が行い、フェーズ管理・処刑・進行を円滑にする。
- 夜の役職行動（人狼／占い／騎士）をWebアプリで実行し、ログとして保持する。

## 2. 使用環境・前提
- スマホ（iOS/Android）＋PC（ホスト）のブラウザで動作。
- 無料サーバー（Render/Cloudflare/自宅PC FastAPI）で運用可能。
- 同一Wi-Fiでの利用を想定（低レイテンシ）。

## 3. 開発技術
- バックエンド：Python / FastAPI（REST + WebSocket）
- DB：SQLite → 将来 PostgreSQL
- フロント：HTML/JS（MVP）または軽量SPA
- 通信：リアルタイム更新は WebSocket

## 4. 利用するユーザー
- ゲームマスター（GM）：進行と設定を操作
- 一般参加者：役職行動、投票、夜行動など

## 5. 機能要件（高レベル）
### 5.1 登録
- 顔写真を撮影し、アイコンとして登録
- 表示名の登録
- プロファイルは永続保存され、GMが削除できる

### 5.2 参加
- GMは台帳から出席簿を作り、当日の参加者を選択
- 当日参加者を登録してゲーム開始

### 5.3 ゲーム
- 自動役職配布（人数に応じて振り分け）
- 夜行動：人狼・占い師・騎士・村人疑い
- 昼行動：議論タイマー、投票、決選投票
- 勝敗判定・結果表示

### 5.4 人狼専用仕様
- 重み付き投票（Lv1〜3, 3pt/2pt/1pt）
- 人狼全員が投票完了するまで朝へ進行不可

## 6. 非機能要件
- レイテンシ：体感 1 秒以内
- スマホ画面最適化
- 画像URLはUUIDで安全性を確保
- ログはDBに保存
- HTTPSを推奨

## 7. 制約事項
- MVPは手動進行（フェーズ遷移はGMがボタン操作）
- 狂人や狐などの追加役職は将来対応

